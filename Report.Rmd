---
title: "Predicting Newborn Weight"
author: Liam Coleman-Aulenbach, Venessa Keung, Lucy Wang
output: pdf_document
documentclass: article
---

```{r setup, include=FALSE}
# Knitr Configuration
knitr::opts_chunk$set(include=FALSE, results="hide")
```

```{r import}
# Import
births <- read.csv("chds_births.csv")
```

# Summary



# Model Selection


## Data Diagnostics


### Data Exploration

### Outliers

### Missing Data

## Data Preprocessing

### Filling Missing Values

```{r mice}
library(mice)
m <- 5

multiplyImputedBirths <- mice(births, m = m, method = "pmm", seed = 500, printFlag = FALSE)

imputedBirths <- lapply(1:m, function(i) complete(multiplyImputedBirths, i))
```


### Decoding

```{r preprocessData}
# Re-encoding and labelling variates
decodeBirthVariates <- function (birthsDataset) {
  ethLabels <- c(
    "Caucasian",
    "Mexican",
    "African-American",
    "Asian",
    "Mixed",
    "Other"
  )
  edLabels <- c(
    "Elementary School",
    "Middle School",
    "High School",
    "High School + Trade School",
    "High School + Some College",
    "College Graduate",
    "Trade School",
    "High School Unclear"
  )

  birthsDataset$meth <- cut(
    birthsDataset$meth,
    breaks = c(0, 5:10), 
    labels = ethLabels,
    right = TRUE,
    include.lowest= TRUE
  )
  
  birthsDataset$med <- cut(
    birthsDataset$med,
    breaks = 0:8, 
    labels = edLabels,
    right = FALSE
  )
  
  birthsDataset$feth <- cut(
    birthsDataset$feth,
    breaks = c(0, 5:10), 
    labels = ethLabels,
    right = TRUE,
    include.lowest= TRUE
  )
  
  birthsDataset$fed <- cut(
    birthsDataset$fed,
    breaks = 0:8, 
    labels = edLabels,
    right = FALSE
  )
  
  birthsDataset$smoke <- cut(
    birthsDataset$smoke,
    breaks = 0:4, 
    labels = c(
      "Never",
      "Smokes Now",
      "Until Pregnancy",
      "Doesn't Smoke Anymore"
    ),
    right = FALSE
  )
  
  birthsDataset$marital <- cut(
    birthsDataset$marital,
    breaks = 0:5, 
    labels = c(
      "Married",
      "Legally Separated",
      "Divorced",
      "Widowed",
      "Never Married"
    )
  )
  
  birthsDataset$number <- cut(
    birthsDataset$number,
    breaks = 0:10,
    labels = c(
      "Never Smoked",
      "1-4",
      "5-9",
      "10-14",
      "15-19",
      "20-29",
      "30-39",
      "40-60",
      "More Than 60",
      "Smoked But Don't Know How Much"
    ),
    right = FALSE
  )

  birthsDataset$time <- cut(
    birthsDataset$time,
    breaks = 0:10,
    labels = c(
      "Never Smoked",
      "Still Smokes",
      "During Pregnancy",
      "Less Than A Year",
      "1-2 Years",
      "2-3 Years",
      "3-4 Years",
      "5-9 Years",
      "More Than 10 Years",
      "Quit But Don't Know When"
    ),
    right = FALSE
  )

  birthsDataset$income <- cut(
    birthsDataset$income,
    breaks = c(0, 1, 2, 10),
    labels = c(
      "Under 2500",
      "2500-4999",
      "5000-Over 25000"
    ),
    right = FALSE
  )
  
  birthsDataset
}

decodedImputedBirths <- lapply(imputedBirths, decodeBirthVariates)
```

## Candidate Model 1

### Automated Model Selection


## Candidate Model 2

### Hand-crafted Features

### Automated Model Selection



# Model Diagnostics

## Significance


## AIC


## Cross-Validation


# Discussion



# Appendix
```{r, ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE, include=TRUE}
```
